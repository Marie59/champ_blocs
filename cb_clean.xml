<tool id="cb_cleaning" name="Clean data" version="@VERSION@" profile = "20.01">
    <description>for dissimilarity calculations</description>
    <macros>
        <import>macro.xml</import>
    </macros>
    <expand macro="cb_requirements">
        <requirement type="package" version="2.6_2">r-vegan</requirement>
        <requirement type="package" version="1.3.2">r-tidyverse</requirement>
    </expand>
    <command detect_errors="exit_code"><![CDATA[
        Rscript
            '$__tool_directory__/cb_clean.r'
            '$fiche_val'
            '$input_data'
            '$output_qecb'
        ]]>
    </command>
    <inputs>
        <expand macro="cb_input"/>
        <param name="input_data" type="data" format="data" label="Input champbloc_qecb.csv"/>
    </inputs>
    <outputs>
        <data name="output_qecb" from_work_dir="qecbnato0.RDS" format="Rdata" label="Clean Rdata"/>
    </outputs>
    <tests>
        <test>
            <param name="fiche_val" value="ficheterrain.csv"/>
            <param name="input_data" value="champbloc_qecb.csv"/>
            <output name="output_qecb">
                <assert_contents>
                    <has_text text="E6P"/>
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[
================
Cleaning process
================


**What it does**

Cleans the ESTAMP data in order to calculate the dissimilarity index (another tool available on Galaxy-Ecology).

**Input description**

Two input files in csv format.

+------------------------+------------------+
|           CSV          |        CSV       |
+========================+==================+
|   champbloc_qecb.csv   | ficheterrain.csv |
+------------------------+------------------+
|          ...           |        ...       |
+------------------------+------------------+


**Output**

- 1 Rdata file to use as the input of ecology



    ]]>    </help>
        <expand macro="cb_bibref"/>
</tool>
